<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://yt3.ggpht.com/OQvZj1f_JdZl0SLcZ7jLWPJSnMoc-qXtNQ3QBbRDKgcJfPmp6XhKbzq8mpey1JgG28g6cNY75M8=s800-c-k-c0x00ffffff-no-rj" type="image/x-icon">
    <title>Preglustiana Dictionary</title>
    <style>
        body {
            justify-content: center;
            align-items: center;
            margin: 1%;
            background-color: #1C1B20;
            font-family: arial, sans-serif;
        }
        #content {
            text-align: center;
        }
        button {
            background-color: #688baf;
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 3px;
        }
        button:hover {background-color: #475d75}
        form {
            background-color: #3b3b3b;
            border-radius: 5px;
            padding: 5px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            margin: 20px auto;
            max-width: 450px;
        }
        input[type="text"] {
            padding: 10px;
            width: 80%;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .dictionary-entry {
            background-color: #27272a;
            padding: 10px;
            margin-top: 10px;
            color: white;
        }
        .dictionary-entry h5 {
            margin: 0;
        }
        .toggle-button {
            margin-top: 5px;
            padding: 5px;
            background-color: #688baf;
            color: white;
            cursor: pointer;
            border-radius: 3px;
        }
        img {
            margin: 15px;
            text-align: center;
            width: auto;
            height: auto;
            max-width: 350px;
            max-height: 350px;
        }
        h1{color: #FFFF}
        h2{color: #FFFF}
        h4{color: #FFFF}
        h3{color: #FFFF}
        h5{color: #FFFF}
        p{color : #FFFF}
    </style>
</head>
<body>
	<div id="content">
        <img src="https://github.com/KFCgaming/Preglustiana/raw/main/Thumbnail.png">
        <h5>Cr√©e par KFCgaming</h5>
        <form id="menu">
          <h3>Preglustiana</h3>
          <button id="dictionnarybutton"style="background-color: #4993c4"><ins>Dictionnaire üìñ</ins></button>
          <button id="menu" >Menu üè†</button>
          <button id="credits">Cr√©dits üìú</button>
      </form>
        <form>
            <h4><ins>Dictionnaire üìñ</ins></h4>
            <p>Ce dictionnaire vous permet de rechercher des mots dans deux langues diff√©rentes pour le moment. üåê</p><p>Ce sont le Preglustiana et le Fran√ßais. üìòüìô</p><p>Gr√¢ce √† ce dernier, vous pourrez avoir non seulement une liste des mots disponible dans cette langue mais surtout, une d√©finition traduite dans ces 2 langues. üîé</p>
            <input type="text" id="searchInput" placeholder="Rechercher un mot..." oninput="searchWord()">
        </form>
        <div id="results"></div>
        <br>
    <form id="links"><a href="https://github.com/KFCgaming" style="color: #8064ad;">Github üêà‚Äç‚¨õ<a>„Ö§<a href="https://kfcgaming.github.io/portal.html" style="color: #868686">Portal üìé</a>„Ö§<a href="https://github.com/KFCgaming/Preglustiana" style="color: #b94a4a;">Repository üß∞<a></form>

    </div>

<script>
    let dictionary = [];

    // Fonction pour normaliser une cha√Æne de caract√®res pour la recherche
    function normalizeString(str) {
        if (typeof str !== 'string') {
            return ''; // G√®re les entr√©es non-cha√Ænes pour √©viter les erreurs
        }
        return str
            .toLowerCase() // Convertit en minuscules
            .normalize("NFD") // Normalise pour d√©composer les caract√®res accentu√©s
            .replace(/[\u0300-\u036f]/g, "") // Supprime les diacritiques (accents)
            .replace(/[^a-z0-9]/g, ''); // Supprime les caract√®res non-alphanum√©riques (espaces, tirets, etc.)
    }

    // Charger le fichier JSON
    fetch('dictionaryfrps.json')
        .then(response => response.json())
        .then(data => {
            dictionary = data; // Stocker le dictionnaire dans la variable
        })
        .catch(error => console.error('Erreur lors du chargement du dictionnaire:', error));

    function searchWord() {
        const query = document.getElementById('searchInput').value; // R√©cup√®re la requ√™te sans la mettre en minuscule tout de suite
        const normalizedQuery = normalizeString(query); // Normalise la requ√™te de l'utilisateur
        const resultsDiv = document.getElementById('results');
        
        // Si la barre de recherche est vide ou contient moins de 3 caract√®res, on vide les r√©sultats
        // Note : La v√©rification de la longueur doit se faire sur la requ√™te originale ou une version coh√©rente
        // Ici, on utilise la longueur de la requ√™te normalis√©e pour la coh√©rence de la recherche.
        if (normalizedQuery.length < 3) {
            resultsDiv.innerHTML = '';
            return; // Sortir de la fonction si moins de 3 caract√®res normalis√©s sont saisis
        }

        resultsDiv.innerHTML = ''; // R√©initialiser les r√©sultats

        // Filtrer les r√©sultats en fonction de la saisie normalis√©e
        const results = dictionary.filter(entry => {
            const normalizedPs = normalizeString(entry.ps);
            const normalizedFr = normalizeString(entry.fr);

            return normalizedPs.startsWith(normalizedQuery) || normalizedFr.startsWith(normalizedQuery);
        });

        // Trier les r√©sultats par longueur de mot (en utilisant les longueurs originales pour un affichage plus pertinent)
        results.sort((a, b) => {
            const lenA = Math.min(
                (a.ps && typeof a.ps === 'string' ? a.ps.length : Infinity),
                (a.fr && typeof a.fr === 'string' ? a.fr.length : Infinity)
            );
            const lenB = Math.min(
                (b.ps && typeof b.ps === 'string' ? b.ps.length : Infinity),
                (b.fr && typeof b.fr === 'string' ? b.fr.length : Infinity)
            );
            return lenA - lenB; // Les mots plus courts appara√Ætront en premier
        });

        // Afficher les r√©sultats filtr√©s et tri√©s
        results.forEach(entry => {
            const entryDiv = document.createElement('div');
            entryDiv.className = 'dictionary-entry';

            const wordDisplay = document.createElement('h5');
            wordDisplay.textContent = `${entry.ps} (Fran√ßais: ${entry.fr})`;

            const definitionDisplay = document.createElement('p');
            definitionDisplay.textContent = entry.definitionFr; // Affiche la d√©finition fran√ßaise en premier
            definitionDisplay.className = 'definition';

            const toggleButton = document.createElement('button');
            toggleButton.textContent = 'Afficher en Preglustiana'; // Texte initial du bouton
            toggleButton.className = 'toggle-button';
            toggleButton.onclick = function() {
                if (definitionDisplay.textContent === entry.definitionFr) {
                    definitionDisplay.textContent = entry.definitionPreg;
                    toggleButton.textContent = 'Afficher en Fran√ßais';
                } else {
                    definitionDisplay.textContent = entry.definitionFr;
                    toggleButton.textContent = 'Afficher en Preglustiana';
                }
            };

            entryDiv.appendChild(wordDisplay);
            entryDiv.appendChild(definitionDisplay);
            entryDiv.appendChild(toggleButton);

            resultsDiv.appendChild(entryDiv);
        });
    }
</script>
</body>
</html>




